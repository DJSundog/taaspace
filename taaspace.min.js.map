{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/index.js","src/version.js","src/Taa.js","src/Space.js","src/HTMLSpaceView.js","src/SpacePlane.js","src/SpaceTaa.js","src/SpaceRectangle.js","src/Transformer.js","src/SpacePoint.js","node_modules/component-emitter/index.js","node_modules/loadimages/index.js","node_modules/nudged/index.js","node_modules/movejs/index.js","node_modules/seqid/seqid.js","node_modules/nudged/lib/estimateTS.js","node_modules/nudged/lib/estimateT.js","node_modules/nudged/lib/estimateR.js","node_modules/nudged/lib/estimateS.js","node_modules/nudged/lib/estimateTR.js","node_modules/nudged/lib/estimateSR.js","node_modules/nudged/lib/Transform.js","node_modules/nudged/lib/estimateTSR.js","node_modules/nudged/lib/version.js","node_modules/movejs/node_modules/component-query/index.js","node_modules/movejs/node_modules/after-transition/index.js","node_modules/movejs/node_modules/css-ease/index.js","node_modules/movejs/node_modules/has-translate3d/index.js","node_modules/movejs/node_modules/after-transition/node_modules/has-transitions/index.js","node_modules/movejs/node_modules/after-transition/node_modules/css-emitter-component/index.js","node_modules/movejs/node_modules/has-translate3d/node_modules/transform-property/index.js","node_modules/movejs/node_modules/after-transition/node_modules/css-emitter-component/node_modules/event-component/index.js"],"names":["exports","Taa","require","Space","HTMLSpaceView","version","module","Emitter","loadimages","NOOP","imgSrc","onLoaded","this","this2","image","src","notCached","err","emit","setTimeout","SpacePlane","SpaceTaa","content","transformedHandlers","proto","prototype","has","spacetaa","space","add","taa","st","_add","id","handler","on","remove","hasOwnProperty","_remove","h","off","Transformer","SpaceRectangle","nudged","move","defaults","duration","seqid","container","next","toString","_el","w","clientWidth","clientHeight","resize","_elements","_spacetaas","transformImage","img","T","_T","multiplyBy","inverse","matrix","s","r","tx","ty","end","el","Image","className","appendChild","removeChild","element","getElementBySpaceTaa","spaceTaa","getSpaceTaaByElementId","i","split","spaceViewId","spaceTaaId","getRootElement","SpacePoint","at","xy","length","emitter","Transform","transformer","t","width","height","dimensions","getSize","atNorm","atMid","atMidN","atMidW","atMidE","atMidS","atNW","atNE","atSW","atSE","normalize","points","plane","p","np","normalized","Array","isArray","to","push","transformByEstimate","type","domain","range","pivot","normPivot","normDomain","normRange","estimate","getTransform","setTransform","translate","scale","multiplierOrDomain","useMultiplier","multiplier","scaleBy","rotate","radiansOrDomain","useRadians","radians","rotateBy","translateScale","translateRotate","scaleRotate","translateScaleRotate","reference","offset","dx","dy","polarOffset","radius","x","Math","cos","y","sin","equals","point","target","B","AB","transform","tr","xy_hat","obj","mixin","key","addEventListener","event","fn","_callbacks","once","apply","arguments","removeListener","removeAllListeners","removeEventListener","callbacks","cb","splice","args","slice","call","len","listeners","hasListeners","imgSrcs","then","numberOfImages","stringGiven","thereWasSuccess","thereWasError","imgs","onloadsCalled","onload","onerror","Error","isFinalImage","errMsg","estimateT","estimateS","estimateR","estimateTS","estimateTR","estimateSR","estimateTSR","name","toUpperCase","Move","query","TypeError","_props","_rotate","_transitionProps","_transforms","after","has3d","ease","style","window","getComputedStyle","currentStyle","select","selector","skew","skewX","n","skewY","join","translateX","translateY","scaleX","m11","m12","m21","m22","m31","m32","scaleY","setVendorProperty","animate","props","_duration","parseFloat","delay","setProperty","prop","val","set","transition","self","curr","parseInt","current","sub","getPropertyValue","indexOf","applyProperties","clone","parent","pop","reset","webkitTransitionDuration","mozTransitionDuration","msTransitionDuration","oTransitionDuration","SeqId","initial","random","pow","_id","a","b","c","d","a1","b1","c1","d1","a2","b2","ac","bd","X","Y","N","min","N2","a12","b12","q","D","shat","txhat","tyhat","IDENTITY","a0","b0","ad","bc","rhat","sqrt","aa","bb","max","v","den","eps","abs","getMatrix","e","f","getRotation","atan2","getScale","getTranslation","det","translateBy","m","co","si","one","querySelector","document","all","querySelectorAll","engine","afterTransition","callback","hasTransitions","bind","unbind","in","out","in-out","snap","linear","ease-in-quad","ease-in-cubic","ease-in-quart","ease-in-quint","ease-in-sine","ease-in-expo","ease-in-circ","ease-in-back","ease-out-quad","ease-out-cubic","ease-out-quart","ease-out-quint","ease-out-sine","ease-out-expo","ease-out-circ","ease-out-back","ease-in-out-quart","ease-in-out-quint","ease-in-out-sine","ease-in-out-expo","ease-in-out-circ","ease-in-out-back","map","webkitTransform","OTransform","msTransform","MozTransform","createElement","body","insertBefore","property","types","shift","CssEmitter","events","watch","styles","capture","attachEvent","detachEvent"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\nexports.Taa = require('./Taa');\nexports.Space = require('./Space');\nexports.HTMLSpaceView = require('./HTMLSpaceView');\n\nexports.version = require('./version');\n","module.exports = '3.0.0';\n","// API v0.3.0\nvar Emitter = require('component-emitter');\nvar loadimages = require('loadimages');\n\nvar NOOP = function () {};\n\nvar Taa = function (imgSrc, onLoaded) {\n  // Parameters\n  //   imgSrc\n  //   onLoaded(err, taa)\n  //     optional, function (taa)\n  Emitter(this);\n  var this2 = this;\n\n  // onLoaded is optional\n  if (typeof onLoaded !== 'function') {\n    onLoaded = NOOP;\n  }\n\n  // This object will be replaced by a real Image object but before that\n  // src is needed in SpaceView.\n  this.image = { src: imgSrc };\n\n  // If the image is cached, the 'load' event of Image element is\n  // fired instantly when calling loadimages. If we did not care\n  // about this, the on('loaded', fn) listeners would experience\n  // different execution order depending whether the images was\n  // cached or not.\n  var notCached = false;\n\n  loadimages(imgSrc, function (err, image) {\n    this2.image = image;\n\n    if (notCached) {\n      this2.emit('loaded', err, this2);\n      onLoaded(err, this2);\n    } else {\n      setTimeout(function () {\n        this2.emit('loaded', err, this2);\n        onLoaded(err, this2);\n      }, 0);\n    }\n  });\n  notCached = true;\n};\n\nmodule.exports = Taa;\n","/*\nEmits\n  contentAdded\n  contentRemoved\n    not thrown if the content to remove did not exist in the first place.\n  contentTransformed\n*/\nvar Emitter = require('component-emitter');\nvar SpacePlane = require('./SpacePlane');\nvar SpaceTaa = require('./SpaceTaa');\n\nvar Space = function () {\n  Emitter(this);\n  SpacePlane(this);\n  // Has constant identity transformation _T\n\n  this.content = {}; // Dict over list because key search time complexity\n  this.transformedHandlers = {}; // To be able to remove event handlers\n};\n\nvar proto = Space.prototype;\n\nproto.has = function (spacetaa) {\n  // Return\n  //   true if spacetaa in space\n  return spacetaa.space === this;\n};\n\nproto.add = function (taa) {\n  // Return\n  //   SpaceTaa\n  //\n  var st = new SpaceTaa(this, taa); // Calls space._add\n  return st;\n};\n\nproto._add = function (spacetaa) {\n  // To be called from the SpaceTaa constructor\n  //\n  // Return\n  //   undefined\n\n  var st = spacetaa; // alias\n  var this2 = this;\n\n  this.content[st.id] = st;\n\n  // Listen if transformed\n  var handler = function () {\n    this2.emit('contentTransformed', st);\n  };\n  st.on('transformed', handler);\n  this.transformedHandlers[st.id] = handler;\n\n  this.emit('contentAdded', st);\n};\n\nproto.remove = function (spacetaa) {\n  if (this.content.hasOwnProperty(spacetaa.id)) {\n    spacetaa.remove(); // calls space._remove\n  }  // else\n  // Nothing to remove, nothing to emit\n};\n\nproto._remove = function (spacetaa) {\n  // To be called from SpaceTaa#remove\n  // Precondition: spacetaa in space\n\n  var st = spacetaa; // alias\n  delete this.content[st.id];\n\n  // Remove handlers\n  var h = this.transformedHandlers[st.id];\n  delete this.transformedHandlers[st.id];\n  spacetaa.off('transformed', h);\n\n  this.emit('contentRemoved', st);\n};\n\nmodule.exports = Space;\n","/*\nAPI v0.4.0\nView\n*/\nvar Emitter = require('component-emitter');\nvar SpacePlane = require('./SpacePlane');\nvar Transformer = require('./Transformer');\nvar SpaceRectangle = require('./SpaceRectangle');\nvar nudged = require('nudged');\nvar move = require('movejs');\n\n// Disable animations by default.\nmove.defaults = { duration: 0 };\n\n// Unique ID generator. Unique over session.\n// Usage: seqid.next()\n// Return: int\nvar seqid = require('seqid')(0);\n\nvar HTMLSpaceView = function (space, container) {\n  Emitter(this);\n  SpacePlane(this);\n  Transformer(this);\n  SpaceRectangle(this);\n  var this2 = this;\n\n  // Test valid space\n  if (typeof space !== 'object' || !('add' in space)) {\n    throw 'Space should be a Space object';\n  }\n  // Test if valid dom element\n  if (!('tagName' in container)) {\n    throw 'Container should be a DOM Element';\n  }\n\n  // Both SpaceTaas and SpaceViews have unique IDs because there can be\n  // plenty of both.\n  this.id = seqid.next().toString();\n\n  this.space = space;\n  this._el = container;\n\n  (function initSize() {\n    var w = container.clientWidth;\n    var h = container.clientHeight;\n    this2.resize([w, h]);\n  }());\n\n  // Two mappings from space taa ids:\n  // 1. to HTML elements of the space taas.\n  // 2. to SpaceTaa instances\n  // Dev decision:\n  //   For data structure, dict over list because key search time complexity.\n  this._elements = {};\n  this._spacetaas = {};\n\n  var transformImage = function (img, spacetaa) {\n    // Transform images because the view orientation.\n    var T = this2._T.multiplyBy(spacetaa._T.inverse());\n    // The last step in the transformation chain.\n    //T = this2.defaultTrans.multiplyBy(this2._T);\n    move(img).matrix(T.s, T.r, -T.r, T.s, T.tx, T.ty).end();\n  };\n\n  // Listen the space for new taas or transformations\n\n  this.space.on('contentAdded', function (spacetaa) {\n    if (this2._elements.hasOwnProperty(spacetaa.id)) {\n      // SpaceTaa is already drawn.\n    } else {\n      var taa = spacetaa.taa;\n      var el = new Image(256, 256);\n      el.src = taa.image.src;\n      el.id = this2.id + '/' + spacetaa.id; // View-specific unique elem id\n      el.className = 'taaspace-taa';\n      // Show to client\n      this2._el.appendChild(el);\n      // Make referencable\n      this2._elements[spacetaa.id] = el;\n      this2._spacetaas[spacetaa.id] = spacetaa;\n      // Make transformation\n      transformImage(el, spacetaa);\n    }\n  });\n\n  this.space.on('contentRemoved', function (spacetaa) {\n    var el;\n    if (this2._elements.hasOwnProperty(spacetaa.id)) {\n      el = this2._elements[spacetaa.id];\n      // Remove HTML element\n      this2._el.removeChild(el);\n      // JS feature: does not throw if does not exist\n      delete this2._elements[spacetaa.id];\n      delete this2._spacetaas[spacetaa.id];\n    }\n  });\n\n  this.space.on('contentTransformed', function (spacetaa) {\n    // Update transformation\n    var el;\n    if (this2._elements.hasOwnProperty(spacetaa.id)) {\n      el = this2._elements[spacetaa.id];\n      // Make transformation\n      transformImage(el, spacetaa);\n    }\n  });\n\n  // If the view is transformed, we of course need to retransform everything.\n  this.on('transformed', function () {\n    var id, element, spacetaa;\n    for (id in this2._elements) {\n      if (this2._elements.hasOwnProperty(id)) {\n        element  = this2._elements[id];\n        spacetaa = this2._spacetaas[id];\n        transformImage(element, spacetaa);\n      }\n    }\n  });\n\n  this.getElementBySpaceTaa = function (spaceTaa) {\n    // Get HTML element representation of the space taa.\n    if (this._elements.hasOwnProperty(spaceTaa.id)) {\n      return this._elements[spaceTaa.id];\n    }\n  };\n\n  this.getSpaceTaaByElementId = function (id) {\n    // Get space taa by HTML element id\n    // Return null if no space taa for such id.\n    var i = id.split('/');\n    var spaceViewId = i[0];\n    var spaceTaaId = i[1];\n    if (this.id === spaceViewId) {\n      if (this._spacetaas.hasOwnProperty(spaceTaaId)) {\n        return this._spacetaas[spaceTaaId];\n      }\n    }\n    return null;\n  };\n\n  this.getRootElement = function () {\n    return this._el;\n  };\n};\n\nvar proto = HTMLSpaceView.prototype;\n\nmodule.exports = HTMLSpaceView;\n","// API v0.6.0\n\nvar nudged = require('nudged');\nvar SpacePoint = require('./SpacePoint');\n\nvar at = function (xy) {\n  if (xy.length !== 2) {  // DEBUG TODO remove this\n    throw 'Invalid point, use array [x, y]';\n  }\n  return new SpacePoint(xy, this);  // Note: this === emitter\n};\n\nvar SpacePlane = function (emitter) {\n  // Coordinate system. The transformation from the space to the plane.\n  // For Space, it is obviously the identity transform.\n  emitter._T = new nudged.Transform(1, 0, 0, 0); // identity transformation\n\n  emitter.at = at;\n};\n\nmodule.exports = SpacePlane;\n","// v0.3.0\n\nvar Emitter = require('component-emitter');\nvar SpacePlane = require('./SpacePlane');\nvar Transformer = require('./Transformer');\nvar SpaceRectangle = require('./SpaceRectangle');\n\n// Unique ID generator. Unique over session.\n// Usage: seqid.next()\n// Return: int\nvar seqid = require('seqid')(0);\n\nvar SpaceTaa = function (space, taa) {\n  Emitter(this);\n  SpacePlane(this);\n  Transformer(this);\n  SpaceRectangle(this);\n\n  this.id = seqid.next().toString();\n  this.space = space;\n  this.taa = taa;\n\n  this.resize([256, 256]); // Size of taa.\n\n  space._add(this);\n};\n\nvar proto = SpaceTaa.prototype;\n\nproto.remove = function () {\n  if (this.space) {\n    var s = this.space;\n    this.space = null;\n    s._remove(this);\n    this.emit('removed', this, s);\n  } // else in null space already\n};\n\nmodule.exports = SpaceTaa;\n","// API v0.5.0\n//var nudged = require('nudged');\nvar SpacePoint = require('./SpacePoint');\n\n/*var normalize = function (points, plane) {\n  // Transform all the points onto the given plane.\n  // Arguments\n  //   points, a single spacepoint or a list of spacepoints\n  //   plane, a SpacePlane e.g. a SpaceTaa where to normalize\n  var i, p, np;\n  var normalized = [];\n  if (!Array.isArray(points)) {\n    points = [points];\n  }\n  for (i = 0; i < points.length; i += 1) {\n    p = points[i];\n    np = p.to(plane).xy;\n    normalized.push(np);\n  }\n  return normalized;\n};*/\n\nvar SpaceRectangle = function (transformer) {\n\n  var t = transformer;  // Alias\n\n  // Rectangles have size.\n  // In its own coordinates, rectangle's right bottom corner\n  // is located at [width, height].\n  // By default transformation, width 1 and height 1 equal to 1 space unit.\n  var width = 1;\n  var height = 1;\n\n  t.resize = function (dimensions) {\n    // Parameter\n    //   dimensions, [width, height]\n    width = dimensions[0];\n    height = dimensions[1];\n\n    t.emit('resized', t);\n  };\n\n  t.getSize = function () {\n    return [width, height];\n  };\n\n  t.atNorm = function (xy) {\n    // Return a SpacePoint by coordinates normalized about the size.\n    // atNorm([1,0]) returns the point at the right upper corner.\n    return new SpacePoint([width * xy[0], height * xy[1]], t);\n  };\n\n  t.atMid = function () {\n    return new SpacePoint([width / 2, height / 2], t);\n  };\n\n  t.atMidN = function () {\n    return new SpacePoint([width / 2, 0], t);\n  };\n\n  t.atMidW = function () {\n    return new SpacePoint([0, height / 2], t);\n  };\n\n  t.atMidE = function () {\n    return new SpacePoint([width, height / 2], t);\n  };\n\n  t.atMidS = function () {\n    return new SpacePoint([width / 2, height], t);\n  };\n\n  t.atNW = function () {\n    return new SpacePoint([0, 0], t);\n  };\n\n  t.atNE = function () {\n    return new SpacePoint([width, 0], t);\n  };\n\n  t.atSW = function () {\n    return new SpacePoint([0, height], t);\n  };\n\n  t.atSE = function () {\n    return new SpacePoint([width, height], t);\n  };\n\n};\n\nmodule.exports = SpaceRectangle;\n","// API v0.2.0\nvar nudged = require('nudged');\nvar SpacePoint = require('./SpacePoint');\n\nvar normalize = function (points, plane) {\n  // Transform all the points onto the given plane.\n  // Arguments\n  //   points, a single spacepoint or a list of spacepoints\n  //   plane, a SpacePlane e.g. a SpaceTaa where to normalize\n  var i, p, np;\n  var normalized = [];\n  if (!Array.isArray(points)) {\n    points = [points];\n  }\n  for (i = 0; i < points.length; i += 1) {\n    p = points[i];\n    np = p.to(plane).xy;\n    normalized.push(np);\n  }\n  return normalized;\n};\n\nvar transformByEstimate = function (plane, type, domain, range, pivot) {\n  // Types: T,S,R,TS,TR,SR,TSR (see nudged for further details)\n\n  var normPivot;\n  if (typeof pivot !== 'undefined') {\n    normPivot = pivot.to(plane).xy;\n  }\n\n  // Convert all SpacePoints onto local SpacePlane and to arrays\n  var normDomain = normalize(domain, plane);\n  var normRange = normalize(range, plane);\n\n  var T = nudged.estimate(type, normDomain, normRange, normPivot);\n  // S represents transf from plane to space, so inverse.\n  plane._T = T.inverse().multiplyBy(plane._T);\n  // Notify especially view about transformation.\n  plane.emit('transformed', plane);\n};\n\nvar Transformer = function (plane) {\n\n  plane.getTransform = function () {\n    // Needed when we want to store Space element's position for later use.\n    return plane._T;\n  };\n\n  plane.setTransform = function (T) {\n    // Needed when we whan to restore stored position, maybe after\n    // modification.\n    plane._T = T;\n    plane.emit('transformed', plane);\n  };\n\n  plane.translate = function (domain, range) {\n    // Move plane horizontally and vertically by example.\n    //\n    // Translate the plane so that after the translation, the domain points\n    // would be as close to given range points as possible.\n    //\n    // Parameter\n    //   domain\n    //   range\n\n    transformByEstimate(this, 'T', domain, range);\n  };\n\n  plane.scale = function (pivot, multiplierOrDomain, range) {\n    // Parameter\n    //   pivot, a SpacePoint\n    //   multiplier, the scale factor, > 0\n    //  OR\n    //   pivot\n    //   domain\n    //   range\n\n    var useMultiplier = (typeof range === 'undefined');\n\n    if (useMultiplier){\n      var normPivot = pivot.to(plane).xy;\n      var multiplier = multiplierOrDomain;\n      // this._T represents transf from space to plane, so inverse scale.\n      // For example, if taa is very small, a far away space coordinate\n      // needs huge multiplier to be represented on the taa's coords.\n      if (multiplier > 0) {\n        this._T = this._T.scaleBy(1 / multiplier, normPivot);\n        plane.emit('transformed', plane);\n      } else {\n        throw 'Invalid multiplier: ' + multiplier;\n      }\n    } else {\n      var domain = multiplierOrDomain;\n      transformByEstimate(this, 'S', domain, range, pivot);\n    }\n  };\n\n  plane.rotate = function (pivot, radiansOrDomain, range) {\n    // Parameter\n    //   pivot\n    //   radians\n    //  OR\n    //   pivot\n    //   domain\n    //   range\n\n    var useRadians = (typeof range === 'undefined');\n\n    if (useRadians){\n      var normPivot = pivot.to(plane).xy;\n      var radians = radiansOrDomain;\n      // this._T represents transf from space to plane, so inverse rads.\n      this._T = this._T.rotateBy(-radians, normPivot);\n      plane.emit('transformed', plane);\n    } else {\n      var domain = radiansOrDomain;\n      transformByEstimate(this, 'R', domain, range, pivot);\n    }\n  };\n\n  // scaleRotate\n\n  plane.translateScale = function (domain, range) {\n    // Parameter\n    //   domain\n    //   range\n\n    transformByEstimate(this, 'TS', domain, range);\n  };\n\n  plane.translateRotate = function (domain, range) {\n    // Parameter\n    //   domain\n    //   range\n\n    transformByEstimate(this, 'TR', domain, range);\n  };\n\n  plane.scaleRotate = function (pivot, domain, range) {\n    // Parameter\n    //   domain\n    //   range\n\n    transformByEstimate(this, 'SR', domain, range, pivot);\n  };\n\n  plane.translateScaleRotate = function (domain, range) {\n    // Parameter\n    //   domain\n    //   range\n\n    transformByEstimate(this, 'TSR', domain, range);\n  };\n\n  // plane.translateAndScaleToFit, not sure if necessary for now\n};\n\nmodule.exports = Transformer;\n","// API v0.3.0\n\nvar SpacePoint = function (xy, reference) {\n  // Example\n  //   var p = taaspace.Point([x, y], taa);\n  //\n  // Parameter\n  //   xy\n  //     2D array\n  //   reference\n  //     a SpacePlane or SpacePoint\n  //       an item in space, enabling coord projections.\n  this.xy = xy;\n\n  // The SpacePlanes transformation the xy are on.\n  // Design note: at first the references were SpacePlanes. But because\n  // a SpacePlane can move or be removed, we chose only the transformation\n  // to be remembered.\n  // For now, there is no hierarchy so local transformation _T is enough.\n  this._T = reference._T;\n};\n\nvar proto = SpacePoint.prototype;\n\n\nproto.offset = function (dx, dy) {\n  // Create a new point nearby.\n  //\n  // Parameter\n  //   dx\n  //     Movement towards positive x\n  //   dy\n  //     ...\n  var xy = [this.xy[0] + dx, this.xy[1] + dy];\n  return new SpacePoint(xy, this);\n};\n\nproto.polarOffset = function (radius, radians) {\n  // Create a new point moved by the polar coordinates\n  var x = this.xy[0] + radius * Math.cos(radians);\n  var y = this.xy[1] + radius * Math.sin(radians);\n  return new SpacePoint([x, y], this);\n};\n\nproto.equals = function (point) {\n  return (this.xy[0] === point.xy[0] &&\n          this.xy[1] === point.xy[1] &&\n          this._T.equals(point._T));\n};\n\nproto.to = function (target) {\n  // Create a new SpacePoint at same location but on a\n  // different SpacePlane.\n  //\n  // Implementation:\n  // First, compute transformation B from the current plane\n  // to the space. It is equal to the inverse transformation of this._T.\n  // Second, let A be transformation to the target plane.\n  // Compute combined transformation AB. Given a vector x, y = ABx, where\n  // y is now x when represented in the coordinates of the target plane.\n  //\n  // Parameter\n  //   target, a SpacePlane\n  \n  if (target._T.equals(this._T)) {\n    return this;\n  } // else\n  var B = this._T.inverse();\n  var AB = target._T.multiplyBy(B);\n  var y = AB.transform(this.xy);\n  return new SpacePoint(y, target);\n};\n\nproto.transform = function (tr) {\n  // Create a new point by transformation.\n  //\n  // Parameter\n  //   tr\n  //     a Transform\n  var xy_hat = tr.transform(this.xy);\n  return new SpacePoint(xy_hat, this);\n};\n\n\nmodule.exports = SpacePoint;\n","\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","module.exports = function loadimages(imgSrcs, then) {\n  // Parameters\n  //   imgSrcs\n  //     array of image source paths OR single source path string.\n  //   then(err, imgElements)\n  //     Will be called after all the images are loaded. If string was given,\n  //     imgElements is an Image instead of array of Images.\n\n  var numberOfImages, stringGiven, thereWasSuccess, thereWasError, imgs;\n  var onloadsCalled, onload, onerror;\n\n  if (typeof then !== 'function') {\n    throw new Error('callback should be a function: ' + then);\n  }\n\n  if (typeof imgSrcs === 'string') {\n    numberOfImages = 1;\n    stringGiven = true;\n    imgSrcs = [imgSrcs]; // Normalize\n  } else {\n    // Array of images\n    numberOfImages = imgSrcs.length;\n    stringGiven = false;\n  }\n  thereWasSuccess = false;\n  thereWasError = false;\n\n  imgs = [];\n\n  onloadsCalled = 0;\n  onload = function () {\n    // Note:\n    //   this = Image\n    if (!thereWasError) {\n      onloadsCalled += 1;\n      var isFinalImage = (onloadsCalled === numberOfImages);\n      if (isFinalImage) {\n        thereWasSuccess = true;\n        if (stringGiven) {\n          then(null, imgs[0]);\n        } else {\n          then(null, imgs);\n        }\n      }\n    }\n  };\n\n  onerror = function (errMsg) {\n    // Note:\n    //   this = Image\n\n    // No errors after success.\n    if (!thereWasSuccess) {\n      thereWasError = true;\n      then(errMsg, null);\n    }\n\n    // Prevent firing the default event handler\n    // https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onerror#Parameters\n    return true;\n  };\n\n  for (i = 0; i < imgSrcs.length; i += 1) {\n    imgs.push(new Image());\n    imgs[i].onload = onload;\n    imgs[i].onerror = onerror;\n    imgs[i].src = imgSrcs[i];\n  }\n};\n","/*\n\n*/\nexports.Transform = require('./lib/Transform');\nexports.estimateT = require('./lib/estimateT');\nexports.estimateS = require('./lib/estimateS');\nexports.estimateR = require('./lib/estimateR');\nexports.estimateTS = require('./lib/estimateTS');\nexports.estimateTR = require('./lib/estimateTR');\nexports.estimateSR = require('./lib/estimateSR');\nexports.estimateTSR = require('./lib/estimateTSR');\nexports.version = require('./lib/version');\n\nexports.estimate = function (type, domain, range, pivot) {\n  // Parameter\n  //   type\n  //     string. One of the following: 'T', 'S', 'R', 'TS', 'TR', 'SR', 'TSR'\n  //   domain\n  //     array of 2d arrays\n  //   range\n  //     array of 2d arrays\n  //   pivot\n  //     optional 2d array, does nothing for translation estimators\n  var name = 'estimate' + type.toUpperCase();\n  if (exports.hasOwnProperty(name)) {\n    return exports[name](domain, range, pivot);\n  } // else\n  throw new Error('Unknown estimator type: ' + type);\n};\n","/**\n * Module Dependencies.\n */\n\nvar Emitter = require('component-emitter');\nvar query = require('component-query');\nvar after = require('after-transition');\nvar has3d = require('has-translate3d');\nvar ease = require('css-ease');\n\n/**\n * CSS Translate\n */\n\nvar translate = has3d\n  ? ['translate3d(', ', 0)']\n  : ['translate(', ')'];\n\n/**\n * Export `Move`\n */\n\nmodule.exports = Move;\n\n/**\n * Get computed style.\n */\n\nvar style = window.getComputedStyle\n  || window.currentStyle;\n\n/**\n * Library version.\n */\n\nMove.version = '0.5.0';\n\n/**\n * Export `ease`\n */\n\nMove.ease = ease;\n\n/**\n * Defaults.\n *\n *   `duration` - default duration of 500ms\n *\n */\n\nMove.defaults = {\n  duration: 500\n};\n\n/**\n * Default element selection utilized by `move(selector)`.\n *\n * Override to implement your own selection, for example\n * with jQuery one might write:\n *\n *     move.select = function(selector) {\n *       return jQuery(selector).get(0);\n *     };\n *\n * @param {Object|String} selector\n * @return {Element}\n * @api public\n */\n\nMove.select = function(selector){\n  if ('string' != typeof selector) return selector;\n  return query(selector);\n};\n\n/**\n * Initialize a new `Move` with the given `el`.\n *\n * @param {Element} el\n * @api public\n */\n\nfunction Move(el) {\n  if (!(this instanceof Move)) return new Move(el);\n  if ('string' == typeof el) el = query(el);\n  if (!el) throw new TypeError('Move must be initialized with element or selector');\n  this.el = el;\n  this._props = {};\n  this._rotate = 0;\n  this._transitionProps = [];\n  this._transforms = [];\n  this.duration(Move.defaults.duration)\n};\n\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nEmitter(Move.prototype);\n\n/**\n * Buffer `transform`.\n *\n * @param {String} transform\n * @return {Move} for chaining\n * @api private\n */\n\nMove.prototype.transform = function(transform){\n  this._transforms.push(transform);\n  return this;\n};\n\n/**\n * Skew `x` and `y`.\n *\n * @param {Number} x\n * @param {Number} y\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.skew = function(x, y){\n  return this.transform('skew('\n    + x + 'deg, '\n    + (y || 0)\n    + 'deg)');\n};\n\n/**\n * Skew x by `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.skewX = function(n){\n  return this.transform('skewX(' + n + 'deg)');\n};\n\n/**\n * Skew y by `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.skewY = function(n){\n  return this.transform('skewY(' + n + 'deg)');\n};\n\n/**\n * Translate `x` and `y` axis.\n *\n * @param {Number} x\n * @param {Number} y\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.translate =\nMove.prototype.to = function(x, y){\n  return this.transform(translate.join(''\n    + x +'px, '\n    + (y || 0)\n    + 'px'));\n};\n\n/**\n * Translate on the x axis to `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.translateX =\nMove.prototype.x = function(n){\n  return this.transform('translateX(' + n + 'px)');\n};\n\n/**\n * Translate on the y axis to `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.translateY =\nMove.prototype.y = function(n){\n  return this.transform('translateY(' + n + 'px)');\n};\n\n/**\n * Scale the x and y axis by `x`, or\n * individually scale `x` and `y`.\n *\n * @param {Number} x\n * @param {Number} y\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.scale = function(x, y){\n  return this.transform('scale('\n    + x + ', '\n    + (y || x)\n    + ')');\n};\n\n/**\n * Scale x axis by `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.scaleX = function(n){\n  return this.transform('scaleX(' + n + ')')\n};\n\n/**\n * Apply a matrix transformation\n *\n * @param {Number} m11 A matrix coefficient\n * @param {Number} m12 A matrix coefficient\n * @param {Number} m21 A matrix coefficient\n * @param {Number} m22 A matrix coefficient\n * @param {Number} m31 A matrix coefficient\n * @param {Number} m32 A matrix coefficient\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.matrix = function(m11, m12, m21, m22, m31, m32){\n  return this.transform('matrix(' + [m11,m12,m21,m22,m31,m32].join(',') + ')');\n};\n\n/**\n * Scale y axis by `n`.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.scaleY = function(n){\n  return this.transform('scaleY(' + n + ')')\n};\n\n/**\n * Rotate `n` degrees.\n *\n * @param {Number} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.rotate = function(n){\n  return this.transform('rotate(' + n + 'deg)');\n};\n\n/**\n * Set transition easing function to to `fn` string.\n *\n * When:\n *\n *   - null \"ease\" is used\n *   - \"in\" \"ease-in\" is used\n *   - \"out\" \"ease-out\" is used\n *   - \"in-out\" \"ease-in-out\" is used\n *\n * @param {String} fn\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.ease = function(fn){\n  fn = ease[fn] || fn || 'ease';\n  return this.setVendorProperty('transition-timing-function', fn);\n};\n\n/**\n * Set animation properties\n *\n * @param {String} name\n * @param {Object} props\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.animate = function(name, props){\n  for (var i in props){\n    if (props.hasOwnProperty(i)){\n      this.setVendorProperty('animation-' + i, props[i])\n    }\n  }\n  return this.setVendorProperty('animation-name', name);\n}\n\n/**\n * Set duration to `n`.\n *\n * @param {Number|String} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.duration = function(n){\n  n = this._duration = 'string' == typeof n\n    ? parseFloat(n) * 1000\n    : n;\n  return this.setVendorProperty('transition-duration', n + 'ms');\n};\n\n/**\n * Delay the animation by `n`.\n *\n * @param {Number|String} n\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.delay = function(n){\n  n = 'string' == typeof n\n    ? parseFloat(n) * 1000\n    : n;\n  return this.setVendorProperty('transition-delay', n + 'ms');\n};\n\n/**\n * Set `prop` to `val`, deferred until `.end()` is invoked.\n *\n * @param {String} prop\n * @param {String} val\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.setProperty = function(prop, val){\n  this._props[prop] = val;\n  return this;\n};\n\n/**\n * Set a vendor prefixed `prop` with the given `val`.\n *\n * @param {String} prop\n * @param {String} val\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.setVendorProperty = function(prop, val){\n  this.setProperty('-webkit-' + prop, val);\n  this.setProperty('-moz-' + prop, val);\n  this.setProperty('-ms-' + prop, val);\n  this.setProperty('-o-' + prop, val);\n  return this;\n};\n\n/**\n * Set `prop` to `value`, deferred until `.end()` is invoked\n * and adds the property to the list of transition props.\n *\n * @param {String} prop\n * @param {String} val\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.set = function(prop, val){\n  this.transition(prop);\n  this._props[prop] = val;\n  return this;\n};\n\n/**\n * Increment `prop` by `val`, deferred until `.end()` is invoked\n * and adds the property to the list of transition props.\n *\n * @param {String} prop\n * @param {Number} val\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.add = function(prop, val){\n  if (!style) return;\n  var self = this;\n  return this.on('start', function(){\n    var curr = parseInt(self.current(prop), 10);\n    self.set(prop, curr + val + 'px');\n  });\n};\n\n/**\n * Decrement `prop` by `val`, deferred until `.end()` is invoked\n * and adds the property to the list of transition props.\n *\n * @param {String} prop\n * @param {Number} val\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.sub = function(prop, val){\n  if (!style) return;\n  var self = this;\n  return this.on('start', function(){\n    var curr = parseInt(self.current(prop), 10);\n    self.set(prop, curr - val + 'px');\n  });\n};\n\n/**\n * Get computed or \"current\" value of `prop`.\n *\n * @param {String} prop\n * @return {String}\n * @api public\n */\n\nMove.prototype.current = function(prop){\n  return style(this.el).getPropertyValue(prop);\n};\n\n/**\n * Add `prop` to the list of internal transition properties.\n *\n * @param {String} prop\n * @return {Move} for chaining\n * @api private\n */\n\nMove.prototype.transition = function(prop){\n  if (!this._transitionProps.indexOf(prop)) return this;\n  this._transitionProps.push(prop);\n  return this;\n};\n\n/**\n * Commit style properties, aka apply them to `el.style`.\n *\n * @return {Move} for chaining\n * @see Move#end()\n * @api private\n */\n\nMove.prototype.applyProperties = function(){\n  for (var prop in this._props) {\n    this.el.style.setProperty(prop, this._props[prop], '');\n  }\n  return this;\n};\n\n/**\n * Re-select element via `selector`, replacing\n * the current element.\n *\n * @param {String} selector\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.move =\nMove.prototype.select = function(selector){\n  this.el = Move.select(selector);\n  return this;\n};\n\n/**\n * Defer the given `fn` until the animation\n * is complete. `fn` may be one of the following:\n *\n *   - a function to invoke\n *   - an instanceof `Move` to call `.end()`\n *   - nothing, to return a clone of this `Move` instance for chaining\n *\n * @param {Function|Move} fn\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.then = function(fn){\n  // invoke .end()\n  if (fn instanceof Move) {\n    this.on('end', function(){\n      fn.end();\n    });\n  // callback\n  } else if ('function' == typeof fn) {\n    this.on('end', fn);\n  // chain\n  } else {\n    var clone = new Move(this.el);\n    clone._transforms = this._transforms.slice(0);\n    this.then(clone);\n    clone.parent = this;\n    return clone;\n  }\n\n  return this;\n};\n\n/**\n * Pop the move context.\n *\n * @return {Move} parent Move\n * @api public\n */\n\nMove.prototype.pop = function(){\n  return this.parent;\n};\n\n/**\n * Reset duration.\n *\n * @return {Move}\n * @api public\n */\n\nMove.prototype.reset = function(){\n  this.el.style.webkitTransitionDuration =\n  this.el.style.mozTransitionDuration =\n  this.el.style.msTransitionDuration =\n  this.el.style.oTransitionDuration = '';\n  return this;\n};\n\n/**\n * Start animation, optionally calling `fn` when complete.\n *\n * @param {Function} fn\n * @return {Move} for chaining\n * @api public\n */\n\nMove.prototype.end = function(fn){\n  var self = this;\n\n  // emit \"start\" event\n  this.emit('start');\n\n  // transforms\n  if (this._transforms.length) {\n    this.setVendorProperty('transform', this._transforms.join(' '));\n  }\n\n  // transition properties\n  this.setVendorProperty('transition-properties', this._transitionProps.join(', '));\n  this.applyProperties();\n\n  // callback given\n  if (fn) this.then(fn);\n\n  // emit \"end\" when complete\n  after.once(this.el, function(){\n    self.reset();\n    self.emit('end');\n  });\n\n  return this;\n};\n","\"use strict\";\n\nmodule.exports = SeqId\n\nfunction SeqId(initial) {\n  if (!(this instanceof SeqId)) {\n    return new SeqId(initial)\n  }\n  if (initial == null) {\n    initial = (Math.random() - 0.5) * Math.pow(2, 32)\n  }\n  this._id = initial | 0\n}\nSeqId.prototype.next = function () {\n  this._id = (this._id + 1) | 0\n  return this._id\n}\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range) {\n  // Parameters\n  //   domain\n  //     array of [x, y] 2D arrays\n  //   range\n  //     array of [x, y] 2D arrays\n\n  // Alias\n  var X = domain;\n  var Y = range;\n\n  // Allow arrays of different length but\n  // ignore the extra points.\n  var N = Math.min(X.length, Y.length);\n\n  var i, a, b, c, d, a1, b1, c1, d1, a2, b2, ac, bd;\n  a1 = b1 = c1 = d1 = a2 = b2 = ac = bd = 0;\n  for (i = 0; i < N; i += 1) {\n    a = X[i][0];\n    b = X[i][1];\n    c = Y[i][0];\n    d = Y[i][1];\n    a1 += a;\n    b1 += b;\n    c1 += c;\n    d1 += d;\n    a2 += a * a;\n    b2 += b * b;\n    ac += a * c;\n    bd += b * d;\n  }\n\n  // Denominator.\n  var N2 = N * N;\n  var a12 = a1 * a1;\n  var b12 = b1 * b1;\n  var p = a2 + b2;\n  var q = ac + bd;\n  var D = N2 * p - N * (a12 + b12);\n\n  if (D === 0) {\n    // N === 0 => D === 0\n    if (N === 0) {\n      return new Transform(1, 0, 0, 0);\n    } // else\n    // D === 0 <=> all the domain points are the same\n    // We guess the translation to the mean of the range to be the best guess.\n    // Here a, b represents the mean of domain points.\n    return new Transform(1, 0, (c1 / N) - a, (d1 / N) - b);\n  }\n\n  // Estimators\n  var shat = (N2 * q - N * (a1 * c1 + b1 * d1)) / D;\n  var txhat = (-N * a1 * q + N * c1 * p - b12 * c1 + a1 * b1 * d1) / D;\n  var tyhat = (-N * b1 * q + N * d1 * p - a12 * d1 + a1 * b1 * c1) / D;\n\n  return new Transform(shat, 0, txhat, tyhat);\n};\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range) {\n  var i, N, a1, b1, c1, d1, txhat, tyhat;\n\n  N = Math.min(domain.length, range.length);\n  a1 = b1 = c1 = d1 = 0;\n\n  if (N < 1) {\n    // Assume identity transform be the best guess\n    return Transform.IDENTITY;\n  }\n\n  for (i = 0; i < N; i += 1) {\n    a1 += domain[i][0];\n    b1 += domain[i][1];\n    c1 += range[i][0];\n    d1 += range[i][1];\n  }\n\n  txhat = (c1 - a1) / N;\n  tyhat = (d1 - b1) / N;\n\n  return new Transform(1, 0, txhat, tyhat);\n};\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range, pivot) {\n  var i, N, D, a0, b0, a, b, c, d, ac, ad, bc, bd, shat, rhat, tx, ty;\n\n  N = Math.min(domain.length, range.length);\n  ac = ad = bc = bd = 0;\n\n  if (typeof pivot === 'undefined') {\n    a0 = b0 = 0;\n  } else {\n    a0 = pivot[0];\n    b0 = pivot[1];\n  }\n\n  for (i = 0; i < N; i += 1) {\n    a = domain[i][0] - a0;\n    b = domain[i][1] - b0;\n    c = range[i][0] - a0;\n    d = range[i][1] - b0;\n    ac += a * c;\n    ad += a * d;\n    bc += b * c;\n    bd += b * d;\n  }\n\n  p = ac + bd;\n  q = ad - bc;\n\n  D = Math.sqrt(p * p + q * q);\n\n  if (D === 0) {\n    // D === 0\n    // <=> q === 0 and p === 0.\n    // <=> ad === bc and ac === -bd\n    // <=> domain in pivot OR range in pivot OR yet unknown cases\n    //     where the angle cannot be determined.\n    // D === 0 also if N === 0.\n    // Assume identity transform to be the best guess\n    return Transform.IDENTITY;\n  }\n\n  shat = p / D;\n  rhat = q / D;\n  tx = a0 - a0 * shat + b0 * rhat;\n  ty = b0 - a0 * rhat - b0 * shat;\n\n  return new Transform(shat, rhat, tx, ty);\n};\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range, pivot) {\n  var i, N, D, a0, b0, a, b, c, d, ac, bd, aa, bb, shat, tx, ty;\n\n  N = Math.min(domain.length, range.length);\n  ac = bd = aa = bb = 0;\n\n  if (typeof pivot === 'undefined') {\n    a0 = b0 = 0;\n  } else {\n    a0 = pivot[0];\n    b0 = pivot[1];\n  }\n\n  for (i = 0; i < N; i += 1) {\n    a = domain[i][0] - a0;\n    b = domain[i][1] - b0;\n    c = range[i][0] - a0;\n    d = range[i][1] - b0;\n    ac += a * c;\n    bd += b * d;\n    aa += a * a;\n    bb += b * b;\n  }\n\n  D = aa + bb;\n\n  if (D === 0) {\n    // All domain points equal the pivot.\n    // Identity transform is then only solution.\n    // D === 0 also if N === 0.\n    // Assume identity transform to be the best guess\n    return Transform.IDENTITY;\n  }\n\n  // Prevent negative scaling because it would be same as positive scaling\n  // and rotation => limit to zero\n  shat = Math.max(0, (ac + bd) / D);\n  tx = (1 - shat) * a0;\n  ty = (1 - shat) * b0;\n\n  return new Transform(shat, 0, tx, ty);\n};\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range) {\n  // Parameters\n  //   domain\n  //     array of [x, y] 2D arrays\n  //   range\n  //     array of [x, y] 2D arrays\n\n  // Alias\n  var X = domain;\n  var Y = range;\n\n  // Allow arrays of different length but\n  // ignore the extra points.\n  var N = Math.min(X.length, Y.length);\n\n  var i, a, b, c, d, a1, b1, c1, d1, ac, ad, bc, bd;\n  a1 = b1 = c1 = d1 = ac = ad = bc = bd = 0;\n  for (i = 0; i < N; i += 1) {\n    a = X[i][0];\n    b = X[i][1];\n    c = Y[i][0];\n    d = Y[i][1];\n    a1 += a;\n    b1 += b;\n    c1 += c;\n    d1 += d;\n    ac += a * c;\n    ad += a * d;\n    bc += b * c;\n    bd += b * d;\n  }\n\n  // Denominator.\n  var v = N * (ad - bc) - a1 * d1 + b1 * c1;\n  var w = N * (ac + bd) - a1 * c1 - b1 * d1;\n  var D = Math.sqrt(v * v + w * w);\n\n  if (D === 0) {\n    // N === 0 => D === 0\n    if (N === 0) {\n      return new Transform(1, 0, 0, 0);\n    } // else\n    // D === 0 <=> undecidable\n    // We guess the translation to the mean of the range to be the best guess.\n    // Here a, b represents the mean of domain points.\n    return new Transform(1, 0, (c1 - a1) / N, (d1 - b1) / N);\n  }\n\n  // Estimators\n  var shat = w / D;\n  var rhat = v / D;\n  var txhat = (-a1 * shat + b1 * rhat + c1) / N;\n  var tyhat = (-a1 * rhat - b1 * shat + d1) / N;\n\n  return new Transform(shat, rhat, txhat, tyhat);\n};\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range, pivot) {\n  // Estimate optimal transformation given the domain and the range\n  // so that the pivot point remains the same.\n  //\n  // Use cases\n  //   - transform an image that has one corner fixed with a pin.\n  //   - allow only scale and rotation by fixing the middle of the object\n  //     to transform.\n  //\n  // Parameters\n  //   domain, an array of [x, y] points\n  //   range, an array of [x, y] points\n  //   pivot, optional\n  //     the point [x, y] that must remain constant in the tranformation.\n  //     Defaults to origo [0, 0]\n  //\n  //\n  var X, Y, N, s, r, tx, ty;\n\n  // Optional pivot\n  if (typeof pivot === 'undefined') {\n    pivot = [0, 0];\n  }\n\n  // Alias\n  X = domain;\n  Y = range;\n\n  // Allow arrays of different length but\n  // ignore the extra points.\n  N = Math.min(X.length, Y.length);\n\n  var v = pivot[0];\n  var w = pivot[1];\n\n  var i, a, b, c, d;\n  var a2, b2;\n  a2 = b2 = 0;\n  var ac, bd, bc, ad;\n  ac = bd = bc = ad = 0;\n\n  for (i = 0; i < N; i += 1) {\n    a = X[i][0] - v;\n    b = X[i][1] - w;\n    c = Y[i][0] - v;\n    d = Y[i][1] - w;\n    a2 += a * a;\n    b2 += b * b;\n    ac += a * c;\n    bd += b * d;\n    bc += b * c;\n    ad += a * d;\n  }\n\n  // Denominator = determinant.\n  // It becomes zero iff N = 0 or X[i] = [v, w] for every i in [0, n).\n  // In other words, iff all the domain points are under the fixed point or\n  // there is no domain points.\n  var den = a2 + b2;\n\n  var eps = 0.00000001;\n  if (Math.abs(den) < eps) {\n    // The domain points are under the pivot or there is no domain points.\n    // We assume identity transform be the simplest guess. It keeps\n    // the domain points under the pivot if there is some.\n    return new Transform(1, 0, 0, 0);\n  }\n\n  // Estimators\n  s = (ac + bd) / den;\n  r = (-bc + ad) / den;\n  tx =  w * r - v * s + v;\n  ty = -v * r - w * s + w;\n\n  return new Transform(s, r, tx, ty);\n};\n","\nvar Transform = function (s, r, tx, ty) {\n\n  // Public, to allow user access\n  this.s = s;\n  this.r = r;\n  this.tx = tx;\n  this.ty = ty;\n\n  this.equals = function (t) {\n    return (s === t.s && r === t.r && tx === t.tx && ty === t.ty);\n  };\n\n  this.transform = function (p) {\n    // p\n    //   point [x, y] or array of points [[x1,y1], [x2, y2], ...]\n\n    if (typeof p[0] === 'number') {\n      // Single point\n      return [s * p[0] - r * p[1] + tx, r * p[0] + s * p[1] + ty];\n    } // else\n\n    var i, c = [];\n    for (i = 0; i < p.length; i += 1) {\n      c.push([s * p[i][0] - r * p[i][1] + tx, r * p[i][0] + s * p[i][1] + ty]);\n    }\n    return c;\n  };\n\n  this.getMatrix = function () {\n    // Get the transformation matrix in the format common to\n    // many APIs, including:\n    // - kld-affine\n    //\n    // Return\n    //   object o, having properties a, b, c, d, e, f:\n    //   [ s  -r  tx ]   [ o.a  o.c  o.e ]\n    //   [ r   s  ty ] = [ o.b  o.d  o.f ]\n    //   [ 0   0   1 ]   [  -    -    -  ]\n    return { a: s, b: r, c: -r, d: s, e: tx, f: ty };\n  };\n\n  this.getRotation = function () {\n    // in rads\n    return Math.atan2(r, s);\n  };\n\n  this.getScale = function () {\n    // scale multiplier\n    return Math.sqrt(r * r + s * s);\n  };\n\n  this.getTranslation = function () {\n    return [tx, ty];\n  };\n\n  this.inverse = function () {\n    // Return inversed transform instance\n    // See note 2015-10-26-16-30\n    var det = s * s + r * r;\n    // Test if singular transformation. These might occur when all the range\n    // points are the same, forcing the scale to drop to zero.\n    var eps = 0.00000001;\n    if (Math.abs(det) < eps) {\n      throw new Error('Singular transformations cannot be inversed.');\n    }\n    var shat = s / det;\n    var rhat = -r / det;\n    var txhat = (-s * tx - r * ty) / det;\n    var tyhat = ( r * tx - s * ty) / det;\n    return new Transform(shat, rhat, txhat, tyhat);\n  };\n\n  this.translateBy = function (dx, dy) {\n    return new Transform(s, r, tx + dx, ty + dy);\n  };\n\n  this.scaleBy = function (multiplier, pivot) {\n    // Parameter\n    //   multiplier\n    //   pivot\n    //     optional, a [x, y] point\n    var m, x, y;\n    m = multiplier; // alias\n    if (typeof pivot === 'undefined') {\n      x = y = 0;\n    } else {\n      x = pivot[0];\n      y = pivot[1];\n    }\n    return new Transform(m * s, m * r, m * tx + (1-m) * x, m * ty + (1-m) * y);\n  };\n\n  this.rotateBy = function (radians, pivot) {\n    // Parameter\n    //   radians\n    //     from positive x to positive y axis\n    //   pivot\n    //     optional, a [x, y] point\n    var co, si, x, y, shat, rhat, txhat, tyhat;\n    co = Math.cos(radians);\n    si = Math.sin(radians);\n    if (typeof pivot === 'undefined') {\n      x = y = 0;\n    } else {\n      x = pivot[0];\n      y = pivot[1];\n    }\n    shat = s * co - r * si;\n    rhat = s * si + r * co;\n    txhat = (tx - x) * co - (ty - y) * si + x;\n    tyhat = (tx - x) * si + (ty - y) * co + y;\n    return new Transform(shat, rhat, txhat, tyhat);\n  };\n\n\n  this.multiplyBy = function (transform) {\n    // Multiply this transformation matrix A\n    // from the right with the given transformation matrix B\n    // and return the result AB\n\n    // For reading aid:\n    // s -r tx  t.s -r tx\n    // r  s ty *  r  s ty\n    // 0  0  1    0  0  1\n    var t = transform; // alias\n    var shat = s * t.s - r * t.r;\n    var rhat = s * t.r + r * t.s;\n    var txhat = s * t.tx - r * t.ty + tx;\n    var tyhat = r * t.tx + s * t.ty + ty;\n    return new Transform(shat, rhat, txhat, tyhat);\n  };\n};\n\nTransform.IDENTITY = new Transform(1, 0, 0, 0);\n\nmodule.exports = Transform;\n","var Transform = require('./Transform');\n\nmodule.exports = function (domain, range) {\n  // Parameters\n  //   domain\n  //     array of [x, y] 2D arrays\n  //   range\n  //     array of [x, y] 2D arrays\n  var X, Y, N, s, r, tx, ty;\n\n  // Alias\n  X = domain;\n  Y = range;\n\n  // Allow arrays of different length but\n  // ignore the extra points.\n  N = Math.min(X.length, Y.length);\n\n  // If length is zero, no estimation can be done. We choose the indentity\n  // transformation be the best quess.\n  if (N === 0) {\n    return new Transform(1, 0, 0, 0);\n  } // else\n\n  var i, a, b, c, d;\n  var a1 = 0;\n  var b1 = 0;\n  var c1 = 0;\n  var d1 = 0;\n  var a2 = 0;\n  var b2 = 0;\n  var ad = 0;\n  var bc = 0;\n  var ac = 0;\n  var bd = 0;\n  for (i = 0; i < N; i += 1) {\n    a = X[i][0];\n    b = X[i][1];\n    c = Y[i][0];\n    d = Y[i][1];\n    a1 += a;\n    b1 += b;\n    c1 += c;\n    d1 += d;\n    a2 += a * a;\n    b2 += b * b;\n    ad += a * d;\n    bc += b * c;\n    ac += a * c;\n    bd += b * d;\n  }\n\n  // Denominator.\n  // It is zero iff X[i] = X[j] for every i and j in [0, n).\n  // In other words, iff all the domain points are the same or there is only one domain point.\n  var den = N * a2 + N * b2 - a1 * a1 - b1 * b1;\n\n  var eps = 0.00000001;\n  if (-eps < den && den < eps) {\n    // The domain points are the same.\n    // We guess the translation to the mean of the range to be the best guess.\n    // Here a, b represents the mean of domain points.\n    return new Transform(1, 0, (c1 / N) - a, (d1 / N) - b);\n  }\n\n  // Estimators\n  s = (N * (ac + bd) - a1 * c1 - b1 * d1) / den;\n  r = (N * (ad - bc) + b1 * c1 - a1 * d1) / den;\n  tx = (-a1 * (ac + bd) + b1 * (ad - bc) + a2 * c1 + b2 * c1) / den;\n  ty = (-b1 * (ac + bd) - a1 * (ad - bc) + a2 * d1 + b2 * d1) / den;\n\n  return new Transform(s, r, tx, ty);\n};\n","module.exports = '1.0.1';\n","function one(selector, el) {\n  return el.querySelector(selector);\n}\n\nexports = module.exports = function(selector, el){\n  el = el || document;\n  return one(selector, el);\n};\n\nexports.all = function(selector, el){\n  el = el || document;\n  return el.querySelectorAll(selector);\n};\n\nexports.engine = function(obj){\n  if (!obj.one) throw new Error('.one callback required');\n  if (!obj.all) throw new Error('.all callback required');\n  one = obj.one;\n  exports.all = obj.all;\n  return exports;\n};\n","var hasTransitions = require('has-transitions');\nvar emitter = require('css-emitter');\n\nfunction afterTransition(el, callback) {\n  if(hasTransitions(el)) {\n    return emitter(el).bind(callback);\n  }\n  return callback.apply(el);\n};\n\nafterTransition.once = function(el, callback) {\n  afterTransition(el, function fn(){\n    callback.apply(el);\n    emitter(el).unbind(fn);\n  });\n};\n\nmodule.exports = afterTransition;","\n/**\n * CSS Easing functions\n */\n\nmodule.exports = {\n    'in':                'ease-in'\n  , 'out':               'ease-out'\n  , 'in-out':            'ease-in-out'\n  , 'snap':              'cubic-bezier(0,1,.5,1)'\n  , 'linear':            'cubic-bezier(0.250, 0.250, 0.750, 0.750)'\n  , 'ease-in-quad':      'cubic-bezier(0.550, 0.085, 0.680, 0.530)'\n  , 'ease-in-cubic':     'cubic-bezier(0.550, 0.055, 0.675, 0.190)'\n  , 'ease-in-quart':     'cubic-bezier(0.895, 0.030, 0.685, 0.220)'\n  , 'ease-in-quint':     'cubic-bezier(0.755, 0.050, 0.855, 0.060)'\n  , 'ease-in-sine':      'cubic-bezier(0.470, 0.000, 0.745, 0.715)'\n  , 'ease-in-expo':      'cubic-bezier(0.950, 0.050, 0.795, 0.035)'\n  , 'ease-in-circ':      'cubic-bezier(0.600, 0.040, 0.980, 0.335)'\n  , 'ease-in-back':      'cubic-bezier(0.600, -0.280, 0.735, 0.045)'\n  , 'ease-out-quad':     'cubic-bezier(0.250, 0.460, 0.450, 0.940)'\n  , 'ease-out-cubic':    'cubic-bezier(0.215, 0.610, 0.355, 1.000)'\n  , 'ease-out-quart':    'cubic-bezier(0.165, 0.840, 0.440, 1.000)'\n  , 'ease-out-quint':    'cubic-bezier(0.230, 1.000, 0.320, 1.000)'\n  , 'ease-out-sine':     'cubic-bezier(0.390, 0.575, 0.565, 1.000)'\n  , 'ease-out-expo':     'cubic-bezier(0.190, 1.000, 0.220, 1.000)'\n  , 'ease-out-circ':     'cubic-bezier(0.075, 0.820, 0.165, 1.000)'\n  , 'ease-out-back':     'cubic-bezier(0.175, 0.885, 0.320, 1.275)'\n  , 'ease-out-quad':     'cubic-bezier(0.455, 0.030, 0.515, 0.955)'\n  , 'ease-out-cubic':    'cubic-bezier(0.645, 0.045, 0.355, 1.000)'\n  , 'ease-in-out-quart': 'cubic-bezier(0.770, 0.000, 0.175, 1.000)'\n  , 'ease-in-out-quint': 'cubic-bezier(0.860, 0.000, 0.070, 1.000)'\n  , 'ease-in-out-sine':  'cubic-bezier(0.445, 0.050, 0.550, 0.950)'\n  , 'ease-in-out-expo':  'cubic-bezier(1.000, 0.000, 0.000, 1.000)'\n  , 'ease-in-out-circ':  'cubic-bezier(0.785, 0.135, 0.150, 0.860)'\n  , 'ease-in-out-back':  'cubic-bezier(0.680, -0.550, 0.265, 1.550)'\n};\n","\nvar prop = require('transform-property');\n\n// IE <=8 doesn't have `getComputedStyle`\nif (!prop || !window.getComputedStyle) {\n  module.exports = false;\n\n} else {\n  var map = {\n    webkitTransform: '-webkit-transform',\n    OTransform: '-o-transform',\n    msTransform: '-ms-transform',\n    MozTransform: '-moz-transform',\n    transform: 'transform'\n  };\n\n  // from: https://gist.github.com/lorenzopolidori/3794226\n  var el = document.createElement('div');\n  el.style[prop] = 'translate3d(1px,1px,1px)';\n  document.body.insertBefore(el, null);\n  var val = getComputedStyle(el).getPropertyValue(map[prop]);\n  document.body.removeChild(el);\n  module.exports = null != val && val.length && 'none' != val;\n}\n","/**\n * This will store the property that the current\n * browser uses for transitionDuration\n */\nvar property;\n\n/**\n * The properties we'll check on an element\n * to determine if it actually has transitions\n * We use duration as this is the only property\n * needed to technically have transitions\n * @type {Array}\n */\nvar types = [\n  \"transitionDuration\",\n  \"MozTransitionDuration\",\n  \"webkitTransitionDuration\"\n];\n\n/**\n * Determine the correct property for this browser\n * just once so we done need to check every time\n */\nwhile(types.length) {\n  var type = types.shift();\n  if(type in document.body.style) {\n    property = type;\n  }\n}\n\n/**\n * Determine if the browser supports transitions or\n * if an element has transitions at all.\n * @param  {Element}  el Optional. Returns browser support if not included\n * @return {Boolean}\n */\nfunction hasTransitions(el){\n  if(!property) {\n    return false; // No browser support for transitions\n  }\n  if(!el) {\n    return property != null; // We just want to know if browsers support it\n  }\n  var duration = getComputedStyle(el)[property];\n  return duration !== \"\" && parseFloat(duration) !== 0; // Does this element have transitions?\n}\n\nmodule.exports = hasTransitions;","/**\n * Module Dependencies\n */\n\nvar events = require('event');\n\n// CSS events\n\nvar watch = [\n  'transitionend'\n, 'webkitTransitionEnd'\n, 'oTransitionEnd'\n, 'MSTransitionEnd'\n, 'animationend'\n, 'webkitAnimationEnd'\n, 'oAnimationEnd'\n, 'MSAnimationEnd'\n];\n\n/**\n * Expose `CSSnext`\n */\n\nmodule.exports = CssEmitter;\n\n/**\n * Initialize a new `CssEmitter`\n *\n */\n\nfunction CssEmitter(element){\n  if (!(this instanceof CssEmitter)) return new CssEmitter(element);\n  this.el = element;\n}\n\n/**\n * Bind CSS events.\n *\n * @api public\n */\n\nCssEmitter.prototype.bind = function(fn){\n  for (var i=0; i < watch.length; i++) {\n    events.bind(this.el, watch[i], fn);\n  }\n  return this;\n};\n\n/**\n * Unbind CSS events\n * \n * @api public\n */\n\nCssEmitter.prototype.unbind = function(fn){\n  for (var i=0; i < watch.length; i++) {\n    events.unbind(this.el, watch[i], fn);\n  }\n  return this;\n};\n\n/**\n * Fire callback only once\n * \n * @api public\n */\n\nCssEmitter.prototype.once = function(fn){\n  var self = this;\n  function on(){\n    self.unbind(on);\n    fn.apply(self.el, arguments);\n  }\n  self.bind(on);\n  return this;\n};\n\n","\nvar styles = [\n  'webkitTransform',\n  'MozTransform',\n  'msTransform',\n  'OTransform',\n  'transform'\n];\n\nvar el = document.createElement('p');\nvar style;\n\nfor (var i = 0; i < styles.length; i++) {\n  style = styles[i];\n  if (null != el.style[style]) {\n    module.exports = style;\n    break;\n  }\n}\n","\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.bind = function(el, type, fn, capture){\n  if (el.addEventListener) {\n    el.addEventListener(type, fn, capture);\n  } else {\n    el.attachEvent('on' + type, fn);\n  }\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  if (el.removeEventListener) {\n    el.removeEventListener(type, fn, capture);\n  } else {\n    el.detachEvent('on' + type, fn);\n  }\n  return fn;\n};\n"]}